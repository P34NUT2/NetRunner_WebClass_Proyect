{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/antonio/proyectos/NetRunner/frontend/components/Header.tsx"],"sourcesContent":["'use client';\n\nimport { FaRobot, FaCog, FaUser, FaSignOutAlt, FaChevronDown, FaBars } from 'react-icons/fa';\nimport React, { useState } from 'react';\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/context/AuthContext';\n\ninterface HeaderProps {\n  onOpenSidebar?: () => void;\n  onOpenSettings?: () => void;\n}\n\nconst Header: React.FC<HeaderProps> = ({ onOpenSidebar, onOpenSettings }) => {\n  const router = useRouter();\n  const { user, isLoggedIn, logout } = useAuth(); // Obtenemos el estado de autenticación\n  const [dropdownOpen, setDropdownOpen] = useState(false); // Estado para el dropdown\n\n  // Función para cerrar sesión\n  const handleLogout = () => {\n    logout(); // Llamamos a la función logout del contexto\n    setDropdownOpen(false); // Cerramos el dropdown\n    router.push('/login'); // Redirigimos al login\n  };\n\n  return (\n    <header className=\"fixed top-0 left-0 right-0 z-50 bg-black border-b border-red-500/20 py-4 px-6\">\n      <div className=\"container mx-auto flex justify-between items-center\">\n        {/* Lado izquierdo: Hamburger + Logo */}\n        <div className=\"flex items-center space-x-4\">\n          {/* Botón Hamburger (3 barritas) */}\n          <button\n            onClick={onOpenSidebar}\n            className=\"text-gray-400 hover:text-red-500 hover:scale-110 active:scale-95 transition-all duration-200\"\n          >\n            <FaBars size={20} />\n          </button>\n\n          {/* Logo */}\n          <Link href=\"/\" className=\"flex items-center space-x-2\">\n            <div className=\"w-8 h-8 bg-red-500 rounded-full flex items-center justify-center\">\n              <FaRobot className=\"text-black\" />\n            </div>\n            <h1 className=\"text-xl font-bold text-red-500\">\n              NetRunner<span className=\"text-white\">AI</span>\n            </h1>\n          </Link>\n        </div>\n\n        {/* Botones de la derecha */}\n        <div className=\"flex space-x-4 items-center\">\n          {/* Botón de configuración */}\n          <button\n            onClick={onOpenSettings}\n            className=\"text-gray-400 hover:text-red-500 active:text-red-600 transition-colors hover:rotate-90 transition-all duration-300\"\n          >\n            <FaCog />\n          </button>\n\n          {/* CONDICIONAL: Si el usuario está logueado o no */}\n          {isLoggedIn && user ? (\n            // ===== USUARIO LOGUEADO =====\n            <div className=\"relative\">\n              {/* Botón del usuario con dropdown */}\n              <button\n                onClick={() => setDropdownOpen(!dropdownOpen)}\n                className=\"flex items-center space-x-2 px-3 py-1 text-sm bg-gray-800 border border-red-500/30 text-red-500 rounded hover:bg-red-500/10 active:scale-95 transition-all duration-150\"\n              >\n                <FaUser className=\"text-sm\" />\n                <span>{user.username}</span>\n                <FaChevronDown className={`text-xs transition-transform duration-300 ${dropdownOpen ? 'rotate-180' : ''}`} />\n              </button>\n\n              {/* Dropdown Menu */}\n              {dropdownOpen && (\n                <div className=\"absolute right-0 mt-2 w-48 bg-gray-900 border border-gray-700 rounded-lg shadow-lg overflow-hidden\">\n                  {/* Info del usuario */}\n                  <div className=\"px-4 py-3 border-b border-gray-700\">\n                    <p className=\"text-sm text-white font-semibold\">{user.realName}</p>\n                    <p className=\"text-xs text-gray-400\">@{user.username}</p>\n                    <p className=\"text-xs text-red-500 mt-1\">Rol: {user.role}</p>\n                  </div>\n\n                  {/* Opciones del menú */}\n                  <Link\n                    href=\"/profile\"\n                    onClick={() => setDropdownOpen(false)}\n                    className=\"flex items-center space-x-2 px-4 py-2 text-sm text-gray-300 hover:bg-gray-800 hover:text-red-500 hover:scale-105 active:bg-gray-700 active:scale-95 transition-all duration-150\"\n                  >\n                    <FaUser className=\"transition-transform hover:scale-125\" />\n                    <span>Mi Perfil</span>\n                  </Link>\n\n                  <button\n                    onClick={handleLogout}\n                    className=\"w-full flex items-center space-x-2 px-4 py-2 text-sm text-gray-300 hover:bg-red-500/10 hover:text-red-500 hover:scale-105 active:bg-gray-700 active:scale-95 transition-all duration-150\"\n                  >\n                    <FaSignOutAlt className=\"transition-transform hover:rotate-12\" />\n                    <span>Cerrar Sesión</span>\n                  </button>\n                </div>\n              )}\n            </div>\n          ) : (\n            // ===== USUARIO NO LOGUEADO =====\n            <div className=\"flex space-x-2 ml-2\">\n              <Link\n                href=\"/login\"\n                className=\"px-3 py-1 text-sm bg-transparent border border-red-500 text-red-500 rounded hover:bg-red-500 hover:text-black hover:scale-110 hover:shadow-md active:scale-95 transition-all duration-200\"\n              >\n                Log In\n              </Link>\n              <Link\n                href=\"/register\"\n                className=\"px-3 py-1 text-sm bg-red-500 text-black rounded hover:bg-red-600 hover:scale-110 hover:shadow-lg hover:shadow-red-500/50 active:scale-95 transition-all duration-200 animate-pulse-slow\"\n              >\n                Sign Up\n              </Link>\n            </div>\n          )}\n        </div>\n      </div>\n    </header>\n  );\n};\n\nexport default Header;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;;;AANA;;;;;;AAaA,MAAM,SAAgC,CAAC,EAAE,aAAa,EAAE,cAAc,EAAE;;IACtE,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,MAAM,EAAE,GAAG,IAAA,qIAAO,KAAI,uCAAuC;IACvF,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC,QAAQ,0BAA0B;IAEnF,6BAA6B;IAC7B,MAAM,eAAe;QACnB,UAAU,4CAA4C;QACtD,gBAAgB,QAAQ,uBAAuB;QAC/C,OAAO,IAAI,CAAC,WAAW,uBAAuB;IAChD;IAEA,qBACE,6LAAC;QAAO,WAAU;kBAChB,cAAA,6LAAC;YAAI,WAAU;;8BAEb,6LAAC;oBAAI,WAAU;;sCAEb,6LAAC;4BACC,SAAS;4BACT,WAAU;sCAEV,cAAA,6LAAC,2JAAM;gCAAC,MAAM;;;;;;;;;;;sCAIhB,6LAAC,0KAAI;4BAAC,MAAK;4BAAI,WAAU;;8CACvB,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC,4JAAO;wCAAC,WAAU;;;;;;;;;;;8CAErB,6LAAC;oCAAG,WAAU;;wCAAiC;sDACpC,6LAAC;4CAAK,WAAU;sDAAa;;;;;;;;;;;;;;;;;;;;;;;;8BAM5C,6LAAC;oBAAI,WAAU;;sCAEb,6LAAC;4BACC,SAAS;4BACT,WAAU;sCAEV,cAAA,6LAAC,0JAAK;;;;;;;;;;wBAIP,cAAc,OACb,+BAA+B;sCAC/B,6LAAC;4BAAI,WAAU;;8CAEb,6LAAC;oCACC,SAAS,IAAM,gBAAgB,CAAC;oCAChC,WAAU;;sDAEV,6LAAC,2JAAM;4CAAC,WAAU;;;;;;sDAClB,6LAAC;sDAAM,KAAK,QAAQ;;;;;;sDACpB,6LAAC,kKAAa;4CAAC,WAAW,CAAC,0CAA0C,EAAE,eAAe,eAAe,IAAI;;;;;;;;;;;;gCAI1G,8BACC,6LAAC;oCAAI,WAAU;;sDAEb,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;oDAAE,WAAU;8DAAoC,KAAK,QAAQ;;;;;;8DAC9D,6LAAC;oDAAE,WAAU;;wDAAwB;wDAAE,KAAK,QAAQ;;;;;;;8DACpD,6LAAC;oDAAE,WAAU;;wDAA4B;wDAAM,KAAK,IAAI;;;;;;;;;;;;;sDAI1D,6LAAC,0KAAI;4CACH,MAAK;4CACL,SAAS,IAAM,gBAAgB;4CAC/B,WAAU;;8DAEV,6LAAC,2JAAM;oDAAC,WAAU;;;;;;8DAClB,6LAAC;8DAAK;;;;;;;;;;;;sDAGR,6LAAC;4CACC,SAAS;4CACT,WAAU;;8DAEV,6LAAC,iKAAY;oDAAC,WAAU;;;;;;8DACxB,6LAAC;8DAAK;;;;;;;;;;;;;;;;;;;;;;;uEAMd,kCAAkC;sCAClC,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,0KAAI;oCACH,MAAK;oCACL,WAAU;8CACX;;;;;;8CAGD,6LAAC,0KAAI;oCACH,MAAK;oCACL,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASf;GA/GM;;QACW,kJAAS;QACa,qIAAO;;;KAFxC;uCAiHS","debugId":null}},
    {"offset": {"line": 320, "column": 0}, "map": {"version":3,"sources":["file:///home/antonio/proyectos/NetRunner/frontend/components/MessagesBox.tsx"],"sourcesContent":["import React, { useRef, useEffect } from \"react\";\nimport { FaRobot, FaUser } from \"react-icons/fa\";\n\ninterface Props {\n  messages: {text: string, sender: 'user' | 'bot'}[];\n  isTyping: boolean;\n}\n\nconst MessageBox: React.FC<Props> = ({ messages, isTyping }) => {\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  // Auto-scroll al final cuando cambian los mensajes o el typing\n  useEffect(() => {\n    if (messagesEndRef.current) {\n      messagesEndRef.current.scrollIntoView({ behavior: 'smooth' });\n    }\n  }, [messages, isTyping]);\n\n  return (\n    <div\n      id=\"chat-messages\"\n      className=\"flex-1 overflow-y-auto custom-scrollbar space-y-7 pb-32\"\n    >\n      {/* Mensaje inicial del bot */}\n      <div className=\"message-fade-in flex\">\n        <div className=\"w-8 h-8 bg-red-500 rounded-full flex-shrink-0 flex items-center justify-center mr-3\">\n          <FaRobot className=\"text-black\" />\n        </div>\n        <div className=\"bg-gray-900 rounded-lg p-4 max-w-[85%]\">\n          <p className=\"text-sm text-gray-400 mb-1\">NetRunner</p>\n          <p className=\"text-white\">\n            Hola, soy NetRunner. Un modelo de lenguaje avanzado. ¿En qué puedo\n            ayudarte hoy?\n          </p>\n        </div>\n      </div>\n\n      {/* Todos los mensajes */}\n\n      {/*Mensajes del usuario y depues de la IA*/}\n      {messages.map((message, index) => (\n        <div key={index} className={`message-fade-in flex ${message.sender === 'user' ? 'justify-end' : ''}`}>\n          {message.sender === 'bot' ? (\n            <>\n              <div className=\"w-8 h-8 bg-red-500 rounded-full flex-shrink-0 flex items-center justify-center mr-3\">\n                <FaRobot className=\"text-black\" />\n              </div>\n              <div className=\"bg-gray-900 rounded-lg p-4 max-w-[85%]\">\n                <p className=\"text-sm text-gray-400 mb-1\">NetRunner</p>\n                <p className=\"text-white\">{message.text}</p>\n              </div>\n            </>\n          ) : (\n            <>\n              <div className=\"bg-red-500/10 border border-red-500/20 rounded-lg p-4 max-w-[85%]\">\n                <p className=\"text-sm text-red-400 mb-1\">Tú</p>\n                <p className=\"text-white\">{message.text}</p>\n              </div>\n              <div className=\"w-8 h-8 bg-red-500/20 rounded-full flex-shrink-0 flex items-center justify-center ml-3 border border-red-500/30\">\n                <FaUser className=\"text-red-500\" />\n              </div>\n            </>\n          )}\n        </div>\n      ))}\n\n      {/* Indicador de typing - aparece cuando la IA está escribiendo */}\n      {isTyping && (\n        <div className=\"flex\">\n          <div className=\"w-8 h-8 bg-red-500 rounded-full flex-shrink-0 flex items-center justify-center mr-3\">\n            <FaRobot className=\"text-black\" />\n          </div>\n          <div className=\"bg-gray-900 rounded-lg p-4 max-w-[85%]\">\n            <p className=\"text-sm text-gray-400 mb-1\">NetRunner</p>\n            <p className=\"text-white typing-indicator\"></p>\n          </div>\n        </div>\n      )}\n\n      {/* Elemento invisible para auto-scroll */}\n      <div ref={messagesEndRef} />\n    </div>\n  );\n};\n\nexport default MessageBox;\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;;AAOA,MAAM,aAA8B,CAAC,EAAE,QAAQ,EAAE,QAAQ,EAAE;;IACzD,MAAM,iBAAiB,IAAA,uKAAM,EAAiB;IAE9C,+DAA+D;IAC/D,IAAA,0KAAS;gCAAC;YACR,IAAI,eAAe,OAAO,EAAE;gBAC1B,eAAe,OAAO,CAAC,cAAc,CAAC;oBAAE,UAAU;gBAAS;YAC7D;QACF;+BAAG;QAAC;QAAU;KAAS;IAEvB,qBACE,6LAAC;QACC,IAAG;QACH,WAAU;;0BAGV,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC,4JAAO;4BAAC,WAAU;;;;;;;;;;;kCAErB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAE,WAAU;0CAA6B;;;;;;0CAC1C,6LAAC;gCAAE,WAAU;0CAAa;;;;;;;;;;;;;;;;;;YAU7B,SAAS,GAAG,CAAC,CAAC,SAAS,sBACtB,6LAAC;oBAAgB,WAAW,CAAC,qBAAqB,EAAE,QAAQ,MAAM,KAAK,SAAS,gBAAgB,IAAI;8BACjG,QAAQ,MAAM,KAAK,sBAClB;;0CACE,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC,4JAAO;oCAAC,WAAU;;;;;;;;;;;0CAErB,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAE,WAAU;kDAA6B;;;;;;kDAC1C,6LAAC;wCAAE,WAAU;kDAAc,QAAQ,IAAI;;;;;;;;;;;;;qDAI3C;;0CACE,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAE,WAAU;kDAA4B;;;;;;kDACzC,6LAAC;wCAAE,WAAU;kDAAc,QAAQ,IAAI;;;;;;;;;;;;0CAEzC,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC,2JAAM;oCAAC,WAAU;;;;;;;;;;;;;mBAlBhB;;;;;YA0BX,0BACC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC,4JAAO;4BAAC,WAAU;;;;;;;;;;;kCAErB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAE,WAAU;0CAA6B;;;;;;0CAC1C,6LAAC;gCAAE,WAAU;;;;;;;;;;;;;;;;;;0BAMnB,6LAAC;gBAAI,KAAK;;;;;;;;;;;;AAGhB;GA3EM;KAAA;uCA6ES","debugId":null}},
    {"offset": {"line": 564, "column": 0}, "map": {"version":3,"sources":["file:///home/antonio/proyectos/NetRunner/frontend/components/InputArea.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { FaPaperclip, FaPaperPlane } from \"react-icons/fa\";\n\n/**\n * ========== COMPONENTE HIJO: InputArea ==========\n *\n * Este es un componente HIJO que recibe props de su PADRE (Home).\n */\n\n// ========== DEFINICIÓN DE PROPS ==========\n/**\n * Interface Props define qué datos recibe este componente del PADRE\n *\n * Props que recibe:\n * - onSendMessage: Función callback del padre para enviar mensajes\n * - isTyping: Boolean que indica si el bot está escribiendo\n */\ninterface Props {\n  onSendMessage: (text: string) => void;  // Función callback\n  isTyping: boolean;                      // Dato booleano\n}\n\n/**\n * El componente recibe las props mediante desestructuración:\n * { onSendMessage, isTyping }\n *\n * Esto es equivalente a:\n * const onSendMessage = props.onSendMessage;\n * const isTyping = props.isTyping;\n */\nconst InputArea: React.FC<Props> = ({ onSendMessage, isTyping }) => {\n  // ========== ESTADO LOCAL ==========\n  /**\n   * Este componente tiene su propio estado LOCAL:\n   * - message: almacena el texto que el usuario está escribiendo\n   *\n   * ¿Por qué este estado vive AQUÍ y no en el padre?\n   * Porque solo este componente necesita saber qué está escribiendo el usuario\n   * en tiempo real. El padre solo necesita saber cuando se ENVÍA el mensaje.\n   */\n  const [message, setMessage] = useState(\"\");\n\n    /*Con esto se interactua con el evento y pdemos atrabes de los atributos del text area y el evento hacer  resize al textarea */\n  const handleInputChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const textarea = e.target;\n    setMessage(textarea.value);\n\n    textarea.style.height = \"auto\";\n    textarea.style.height = textarea.scrollHeight + \"px\";\n  };\n\n  // ========== FUNCIÓN QUE USA EL CALLBACK DEL PADRE ==========\n  /**\n   * handleSubmit se ejecuta cuando el usuario envía el mensaje\n   *\n   * AQUÍ ES DONDE EL HIJO SE COMUNICA CON EL PADRE:\n   * - Llama a onSendMessage() que es la función del PADRE\n   * - Le pasa el texto del mensaje\n   * - El PADRE recibe esto y actualiza su estado\n   */\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (message.trim() && !isTyping) {\n      // ⚠️ IMPORTANTE: Aquí llamamos a la función del PADRE\n      // Esto es como \"avisar\" al padre: \"Hey, el usuario envió este mensaje\"\n      onSendMessage(message.trim());\n\n      // Limpiamos el estado LOCAL de este componente\n      setMessage(\"\");\n\n      // Reset textarea height\n      const textarea = document.getElementById(\"user-input\") as HTMLTextAreaElement;\n      if (textarea) {\n        textarea.style.height = \"auto\";\n      }\n    }\n  };\n\n  // ========== RENDERIZADO ==========\n  return (\n    <div className=\"bg-gray-900 rounded-lg border border-gray-800 p-4\">\n      <form id=\"chat-form\" className=\"flex space-x-3\" onSubmit={handleSubmit}>\n        <div className=\"flex-1 relative\">\n          {/*\n            Textarea controlado:\n            - value={message} usa el estado LOCAL para controlar el contenido\n            - disabled={isTyping} usa la prop del PADRE para deshabilitar cuando el bot escribe\n            - placeholder cambia según isTyping\n          */}\n          <textarea\n            id=\"user-input\"\n            rows={1}\n            placeholder={isTyping ? \"NetRunner está escribiendo...\" : \"Escribe tu mensaje...\"}\n            value={message}\n            onChange={handleInputChange}\n            disabled={isTyping}\n            className={`w-full border rounded-lg px-4 py-3 pr-12 text-white focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent resize-none textarea-scrollbar ${\n              isTyping\n                ? \"bg-gray-700 border-gray-600 cursor-not-allowed opacity-70\"\n                : \"bg-gray-800 border-gray-700\"\n            }`}\n            style={{ minHeight: \"50px\", maxHeight: \"230px\" }}\n          />\n          <button\n            type=\"button\"\n            className=\"absolute right-3 bottom-3 text-gray-400 hover:text-red-500 hover:scale-125 active:scale-95 transition-all duration-200\"\n          >\n            <FaPaperclip />\n          </button>\n        </div>\n        <button\n          type=\"submit\"\n          disabled={isTyping || !message.trim()}\n          className={`rounded-lg w-12 h-12 flex items-center justify-center transition-all duration-200 ${\n            isTyping || !message.trim()\n              ? \"bg-gray-600 text-gray-400 cursor-not-allowed\"\n              : \"bg-red-500 hover:bg-red-600 hover:scale-110 hover:shadow-lg hover:shadow-red-500/50 active:scale-90 text-black animate-pulse-slow\"\n          }`}\n        >\n          <FaPaperPlane className={!isTyping && message.trim() ? \"animate-bounce-subtle\" : \"\"} />\n        </button>\n      </form>\n      <p className=\"text-xs text-gray-500 mt-2 px-1\">\n        NetRunner puede cometer errores. Verifica información importante.\n      </p>\n    </div>\n  );\n};\n\nexport default InputArea;\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;;AAqBA;;;;;;;CAOC,GACD,MAAM,YAA6B,CAAC,EAAE,aAAa,EAAE,QAAQ,EAAE;;IAC7D,qCAAqC;IACrC;;;;;;;GAOC,GACD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAErC,6HAA6H,GAC/H,MAAM,oBAAoB,CAAC;QACzB,MAAM,WAAW,EAAE,MAAM;QACzB,WAAW,SAAS,KAAK;QAEzB,SAAS,KAAK,CAAC,MAAM,GAAG;QACxB,SAAS,KAAK,CAAC,MAAM,GAAG,SAAS,YAAY,GAAG;IAClD;IAEA,8DAA8D;IAC9D;;;;;;;GAOC,GACD,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAChB,IAAI,QAAQ,IAAI,MAAM,CAAC,UAAU;YAC/B,sDAAsD;YACtD,uEAAuE;YACvE,cAAc,QAAQ,IAAI;YAE1B,+CAA+C;YAC/C,WAAW;YAEX,wBAAwB;YACxB,MAAM,WAAW,SAAS,cAAc,CAAC;YACzC,IAAI,UAAU;gBACZ,SAAS,KAAK,CAAC,MAAM,GAAG;YAC1B;QACF;IACF;IAEA,oCAAoC;IACpC,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAK,IAAG;gBAAY,WAAU;gBAAiB,UAAU;;kCACxD,6LAAC;wBAAI,WAAU;;0CAOb,6LAAC;gCACC,IAAG;gCACH,MAAM;gCACN,aAAa,WAAW,kCAAkC;gCAC1D,OAAO;gCACP,UAAU;gCACV,UAAU;gCACV,WAAW,CAAC,+JAA+J,EACzK,WACI,8DACA,+BACJ;gCACF,OAAO;oCAAE,WAAW;oCAAQ,WAAW;gCAAQ;;;;;;0CAEjD,6LAAC;gCACC,MAAK;gCACL,WAAU;0CAEV,cAAA,6LAAC,gKAAW;;;;;;;;;;;;;;;;kCAGhB,6LAAC;wBACC,MAAK;wBACL,UAAU,YAAY,CAAC,QAAQ,IAAI;wBACnC,WAAW,CAAC,kFAAkF,EAC5F,YAAY,CAAC,QAAQ,IAAI,KACrB,iDACA,qIACJ;kCAEF,cAAA,6LAAC,iKAAY;4BAAC,WAAW,CAAC,YAAY,QAAQ,IAAI,KAAK,0BAA0B;;;;;;;;;;;;;;;;;0BAGrF,6LAAC;gBAAE,WAAU;0BAAkC;;;;;;;;;;;;AAKrD;GAjGM;KAAA;uCAmGS","debugId":null}},
    {"offset": {"line": 719, "column": 0}, "map": {"version":3,"sources":["file:///home/antonio/proyectos/NetRunner/frontend/components/Sidebar.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { FaPlus, FaComments, FaTrash, FaTimes } from 'react-icons/fa';\nimport { useAuth } from '@/context/AuthContext';\nimport { useRouter } from 'next/navigation';\n\ninterface SidebarProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nconst Sidebar: React.FC<SidebarProps> = ({ isOpen, onClose }) => {\n  const { isLoggedIn } = useAuth();\n  const router = useRouter();\n\n  // Historial de chats de ejemplo (después lo conectarás con el backend)\n  const chats = [\n    { id: 1, title: 'Análisis de malware', lastMessage: 'Hace 2 horas', unread: 0 },\n    { id: 2, title: 'Exploits de Linux', lastMessage: 'Ayer', unread: 2 },\n    { id: 3, title: 'Buffer overflow en C', lastMessage: 'Hace 3 días', unread: 0 },\n    { id: 4, title: 'SQL Injection basics', lastMessage: 'Hace 1 semana', unread: 0 },\n  ];\n\n  return (\n    <>\n      {/* Overlay oscuro cuando el sidebar está abierto */}\n      {isOpen && (\n        <div\n          className=\"fixed inset-0 bg-black/60 z-40 backdrop-blur-sm transition-opacity duration-300\"\n          onClick={onClose}\n        />\n      )}\n\n      {/* Sidebar */}\n      <div\n        className={`fixed top-0 left-0 h-full w-80 bg-gray-900 border-r border-gray-800 z-50 transform transition-transform duration-300 ease-in-out ${\n          isOpen ? 'translate-x-0' : '-translate-x-full'\n        }`}\n      >\n        {/* Header del Sidebar */}\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-800\">\n          <h2 className=\"text-lg font-bold text-white\">Historial de Chats</h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-red-500 hover:rotate-90 transition-all duration-300\"\n          >\n            <FaTimes size={20} />\n          </button>\n        </div>\n\n        {/* Botón Nuevo Chat */}\n        <div className=\"p-4\">\n          <button className=\"w-full bg-red-500 hover:bg-red-600 hover:scale-105 hover:shadow-lg hover:shadow-red-500/50 active:scale-95 text-black font-semibold py-3 rounded-lg transition-all duration-200 flex items-center justify-center space-x-2\">\n            <FaPlus />\n            <span>Nuevo Chat</span>\n          </button>\n        </div>\n\n        {/* Contenido del Sidebar */}\n        <div className=\"flex-1 overflow-y-auto custom-scrollbar px-4\">\n          {isLoggedIn ? (\n            // Si está logueado, mostrar historial\n            <div className=\"space-y-2\">\n              <p className=\"text-xs text-gray-500 uppercase font-semibold mb-3\">Recientes</p>\n              {chats.map((chat) => (\n                <div\n                  key={chat.id}\n                  className=\"w-full text-left p-3 rounded-lg bg-gray-800/50 hover:bg-gray-800 hover:scale-102 active:scale-98 border border-gray-700/50 hover:border-red-500/30 transition-all duration-200 group cursor-pointer\"\n                  onClick={() => {\n                    // Aquí irá la lógica para abrir el chat\n                    console.log('Abrir chat', chat.id);\n                  }}\n                >\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-center space-x-2\">\n                        <FaComments className=\"text-red-500 text-sm flex-shrink-0\" />\n                        <h3 className=\"text-sm font-medium text-white truncate group-hover:text-red-500 transition-colors\">\n                          {chat.title}\n                        </h3>\n                      </div>\n                      <p className=\"text-xs text-gray-500 mt-1\">{chat.lastMessage}</p>\n                    </div>\n                    {chat.unread > 0 && (\n                      <span className=\"bg-red-500 text-black text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center flex-shrink-0 ml-2\">\n                        {chat.unread}\n                      </span>\n                    )}\n                  </div>\n\n                  {/* Botón de eliminar (aparece al hover) */}\n                  <div className=\"mt-2 opacity-0 group-hover:opacity-100 transition-opacity\">\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        // Aquí irá la lógica para eliminar\n                        console.log('Eliminar chat', chat.id);\n                      }}\n                      className=\"text-xs text-gray-500 hover:text-red-500 transition-colors flex items-center space-x-1\"\n                    >\n                      <FaTrash size={10} />\n                      <span>Eliminar</span>\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            // Si NO está logueado, mostrar mensaje\n            <div className=\"flex flex-col items-center justify-center h-64 text-center px-4\">\n              <FaComments className=\"text-gray-600 text-5xl mb-4\" />\n              <h3 className=\"text-white font-semibold mb-2\">Historial de Chats</h3>\n              <p className=\"text-gray-400 text-sm mb-4\">\n                Inicia sesión para guardar y acceder a tu historial de conversaciones\n              </p>\n              <button\n                onClick={() => {\n                  onClose();\n                  router.push('/login');\n                }}\n                className=\"px-4 py-2 bg-red-500 hover:bg-red-600 hover:scale-105 active:scale-95 text-black font-medium rounded-lg transition-all duration-200\"\n              >\n                Iniciar Sesión\n              </button>\n            </div>\n          )}\n        </div>\n\n        {/* Footer del Sidebar */}\n        <div className=\"p-4 border-t border-gray-800\">\n          <p className=\"text-xs text-gray-500 text-center\">\n            {isLoggedIn ? `${chats.length} conversaciones` : 'Sin historial guardado'}\n          </p>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Sidebar;\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;;;AALA;;;;AAYA,MAAM,UAAkC,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE;;IAC1D,MAAM,EAAE,UAAU,EAAE,GAAG,IAAA,qIAAO;IAC9B,MAAM,SAAS,IAAA,kJAAS;IAExB,uEAAuE;IACvE,MAAM,QAAQ;QACZ;YAAE,IAAI;YAAG,OAAO;YAAuB,aAAa;YAAgB,QAAQ;QAAE;QAC9E;YAAE,IAAI;YAAG,OAAO;YAAqB,aAAa;YAAQ,QAAQ;QAAE;QACpE;YAAE,IAAI;YAAG,OAAO;YAAwB,aAAa;YAAe,QAAQ;QAAE;QAC9E;YAAE,IAAI;YAAG,OAAO;YAAwB,aAAa;YAAiB,QAAQ;QAAE;KACjF;IAED,qBACE;;YAEG,wBACC,6LAAC;gBACC,WAAU;gBACV,SAAS;;;;;;0BAKb,6LAAC;gBACC,WAAW,CAAC,iIAAiI,EAC3I,SAAS,kBAAkB,qBAC3B;;kCAGF,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAA+B;;;;;;0CAC7C,6LAAC;gCACC,SAAS;gCACT,WAAU;0CAEV,cAAA,6LAAC,4JAAO;oCAAC,MAAM;;;;;;;;;;;;;;;;;kCAKnB,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAO,WAAU;;8CAChB,6LAAC,2JAAM;;;;;8CACP,6LAAC;8CAAK;;;;;;;;;;;;;;;;;kCAKV,6LAAC;wBAAI,WAAU;kCACZ,aACC,sCAAsC;sCACtC,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAE,WAAU;8CAAqD;;;;;;gCACjE,MAAM,GAAG,CAAC,CAAC,qBACV,6LAAC;wCAEC,WAAU;wCACV,SAAS;4CACP,wCAAwC;4CACxC,QAAQ,GAAG,CAAC,cAAc,KAAK,EAAE;wCACnC;;0DAEA,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEAAI,WAAU;;kFACb,6LAAC,+JAAU;wEAAC,WAAU;;;;;;kFACtB,6LAAC;wEAAG,WAAU;kFACX,KAAK,KAAK;;;;;;;;;;;;0EAGf,6LAAC;gEAAE,WAAU;0EAA8B,KAAK,WAAW;;;;;;;;;;;;oDAE5D,KAAK,MAAM,GAAG,mBACb,6LAAC;wDAAK,WAAU;kEACb,KAAK,MAAM;;;;;;;;;;;;0DAMlB,6LAAC;gDAAI,WAAU;0DACb,cAAA,6LAAC;oDACC,SAAS,CAAC;wDACR,EAAE,eAAe;wDACjB,mCAAmC;wDACnC,QAAQ,GAAG,CAAC,iBAAiB,KAAK,EAAE;oDACtC;oDACA,WAAU;;sEAEV,6LAAC,4JAAO;4DAAC,MAAM;;;;;;sEACf,6LAAC;sEAAK;;;;;;;;;;;;;;;;;;uCAnCL,KAAK,EAAE;;;;;;;;;;uEA0ClB,uCAAuC;sCACvC,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,+JAAU;oCAAC,WAAU;;;;;;8CACtB,6LAAC;oCAAG,WAAU;8CAAgC;;;;;;8CAC9C,6LAAC;oCAAE,WAAU;8CAA6B;;;;;;8CAG1C,6LAAC;oCACC,SAAS;wCACP;wCACA,OAAO,IAAI,CAAC;oCACd;oCACA,WAAU;8CACX;;;;;;;;;;;;;;;;;kCAQP,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAE,WAAU;sCACV,aAAa,GAAG,MAAM,MAAM,CAAC,eAAe,CAAC,GAAG;;;;;;;;;;;;;;;;;;;AAM7D;GA9HM;;QACmB,qIAAO;QACf,kJAAS;;;KAFpB;uCAgIS","debugId":null}},
    {"offset": {"line": 1053, "column": 0}, "map": {"version":3,"sources":["file:///home/antonio/proyectos/NetRunner/frontend/app/page.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { useAuth } from '@/context/AuthContext';\nimport { useChat } from '@/context/ChatContext';\nimport { useRouter } from 'next/navigation';\nimport Header from '@/components/Header';\nimport MessageBox from '@/components/MessagesBox';\nimport InputArea from '@/components/InputArea';\nimport Sidebar from '@/components/Sidebar';\n\n/**\n * ═══════════════════════════════════════════════════════════════════════\n *                     COMPONENTE PADRE: Home\n * ═══════════════════════════════════════════════════════════════════════\n *\n * Este es el componente PADRE principal de la página home (/).\n * Un componente PADRE es el que contiene y controla otros componentes (HIJOS).\n *\n * ═══════════════════════════════════════════════════════════════════════\n *                     ARQUITECTURA DE COMPONENTES\n * ═══════════════════════════════════════════════════════════════════════\n *\n *                        ┌─────────────────┐\n *                        │   Home (PADRE)  │\n *                        │                 │\n *                        │  Estado:        │\n *                        │  - messages[]   │\n *                        │  - isTyping     │\n *                        └────────┬────────┘\n *                                 │\n *                 ┌───────────────┼───────────────┐\n *                 │               │               │\n *          ┌──────▼──────┐ ┌──────▼──────┐ ┌────▼─────┐\n *          │   Header    │ │ MessageBox  │ │InputArea │\n *          │   (HIJO)    │ │   (HIJO)    │ │  (HIJO)  │\n *          │             │ │             │ │          │\n *          │ Props: ∅    │ │Props:       │ │Props:    │\n *          │             │ │- messages   │ │- onSend  │\n *          │             │ │- isTyping   │ │- isTyping│\n *          └─────────────┘ └─────────────┘ └────┬─────┘\n *                                                │\n *                          Usuario escribe  ─────┘\n *                          y envía mensaje\n *\n * ═══════════════════════════════════════════════════════════════════════\n *                     FLUJO DE DATOS (Data Flow)\n * ═══════════════════════════════════════════════════════════════════════\n *\n * 1. PADRE → HIJO (Props):\n *    - Los datos fluyen del PADRE a los HIJOS mediante PROPS\n *    - Los HIJOS NO pueden modificar las props (son de solo lectura)\n *\n * 2. HIJO → PADRE (Callbacks):\n *    - Los HIJOS se comunican con el PADRE mediante funciones CALLBACK\n *    - El HIJO ejecuta la función, pero la lógica vive en el PADRE\n *\n * 3. HERMANO → HERMANO:\n *    - Los componentes hermanos NO se comunican directamente\n *    - Deben hacerlo a través del PADRE común\n *    - Ejemplo: InputArea → Home → MessageBox\n *\n * ═══════════════════════════════════════════════════════════════════════\n */\nexport default function Home() {\n  const router = useRouter();\n  const { isLoggedIn } = useAuth();\n  const {\n    chats,\n    currentChatId,\n    messages,\n    loading,\n    loadChats,\n    createChat,\n    loadMessages,\n    sendMessage\n  } = useChat();\n\n  // Estado 2: Controla si el sidebar está abierto o cerrado\n  const [sidebarOpen, setSidebarOpen] = useState<boolean>(false);\n\n  // ==================== INICIALIZACIÓN ====================\n  // Al cargar la página, cargar chats o crear uno por defecto\n  useEffect(() => {\n    const initializeChat = async () => {\n      if (!isLoggedIn) {\n        router.push('/login');\n        return;\n      }\n\n      try {\n        // Cargar chats existentes\n        await loadChats();\n      } catch (error) {\n        console.error('Error al cargar chats:', error);\n      }\n    };\n\n    initializeChat();\n  }, [isLoggedIn]);\n\n  // Si no hay chat seleccionado pero hay chats disponibles, seleccionar el primero\n  useEffect(() => {\n    const selectDefaultChat = async () => {\n      if (chats.length > 0 && !currentChatId) {\n        await loadMessages(chats[0].id);\n      } else if (chats.length === 0 && isLoggedIn && !loading) {\n        // Si no hay chats, crear uno por defecto\n        try {\n          await createChat('Chat Principal');\n        } catch (error) {\n          console.error('Error al crear chat:', error);\n        }\n      }\n    };\n\n    selectDefaultChat();\n  }, [chats, currentChatId, isLoggedIn]);\n\n  // Convertir mensajes del ChatContext al formato que espera MessageBox\n  const formattedMessages = messages.map(msg => ({\n    text: msg.content,\n    sender: msg.role === 'user' ? 'user' as const : 'bot' as const\n  }));\n\n  // ==================== FUNCIÓN CALLBACK ====================\n  /**\n   * handleSendMessage - CONECTADO A OLLAMA\n   *\n   * ANTES: Usaba respuestas fake (botResponses)\n   * AHORA: Envía el mensaje a Ollama (llama3.2) vía backend\n   *\n   * Flujo:\n   * 1. Usuario escribe en InputArea (HIJO)\n   * 2. InputArea llama a handleSendMessage\n   * 3. Se envía a ChatContext.sendMessage()\n   * 4. ChatContext hace fetch al backend\n   * 5. Backend envía a Ollama\n   * 6. Ollama responde con llama3.2\n   * 7. Se actualiza automáticamente en MessageBox\n   */\n  const handleSendMessage = async (text: string) => {\n    if (!currentChatId) {\n      console.error('No hay chat seleccionado');\n      return;\n    }\n\n    try {\n      // Enviar mensaje a Ollama (backend hace el trabajo)\n      await sendMessage(currentChatId, text);\n    } catch (error) {\n      console.error('Error al enviar mensaje:', error);\n    }\n  };\n\n  // ==================== RENDERIZADO ====================\n  // Si no está autenticado, no mostrar nada (se redirige a login)\n  if (!isLoggedIn) {\n    return null;\n  }\n\n  return (\n    <div className=\"bg-black text-gray-100 min-h-screen flex flex-col\">\n        {/* ========== COMPONENTE HIJO: Sidebar ========== */}\n        <Sidebar isOpen={sidebarOpen} onClose={() => setSidebarOpen(false)} />\n\n        {/* ========== COMPONENTE HIJO 1: Header ========== */}\n        {/*\n          Header recibe la función para abrir el sidebar.\n        */}\n        <Header onOpenSidebar={() => setSidebarOpen(true)} />\n\n        <main className=\"flex-1 container mx-auto px-4 py-6 max-w-4xl pt-24\">\n            {/* ========== COMPONENTE HIJO 2: MessageBox ========== */}\n            {/*\n              MessageBox AHORA recibe mensajes REALES de Ollama:\n              - formattedMessages: Mensajes convertidos del ChatContext\n              - loading: Indica si Ollama está procesando la respuesta\n\n              Flujo: ChatContext → formattedMessages → MessageBox\n            */}\n            <MessageBox messages={formattedMessages} isTyping={loading} />\n        </main>\n\n        {/* Input fijo en la parte inferior */}\n        <div className=\"fixed bottom-0 left-0 right-0 bg-gradient-to-t from-black via-black/95 to-transparent pt-8\">\n          <div className=\"container mx-auto px-4 py-4 max-w-4xl\">\n            {/* ========== COMPONENTE HIJO 3: InputArea ========== */}\n            {/*\n              InputArea AHORA conectado a Ollama:\n              - onSendMessage: Envía a ChatContext → Backend → Ollama\n              - loading: Se deshabilita mientras Ollama procesa\n\n              Flujo REAL:\n              1. Usuario escribe en InputArea\n              2. handleSendMessage() se ejecuta\n              3. ChatContext.sendMessage() → Backend\n              4. Backend → Ollama (llama3.2)\n              5. Ollama responde\n              6. Backend guarda en PostgreSQL\n              7. Frontend actualiza mensajes automáticamente\n            */}\n            <InputArea onSendMessage={handleSendMessage} isTyping={loading} />\n          </div>\n        </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AATA;;;;;;;;;AAgEe,SAAS;;IACtB,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,EAAE,UAAU,EAAE,GAAG,IAAA,qIAAO;IAC9B,MAAM,EACJ,KAAK,EACL,aAAa,EACb,QAAQ,EACR,OAAO,EACP,SAAS,EACT,UAAU,EACV,YAAY,EACZ,WAAW,EACZ,GAAG,IAAA,qIAAO;IAEX,0DAA0D;IAC1D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAU;IAExD,2DAA2D;IAC3D,4DAA4D;IAC5D,IAAA,0KAAS;0BAAC;YACR,MAAM;iDAAiB;oBACrB,IAAI,CAAC,YAAY;wBACf,OAAO,IAAI,CAAC;wBACZ;oBACF;oBAEA,IAAI;wBACF,0BAA0B;wBAC1B,MAAM;oBACR,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,0BAA0B;oBAC1C;gBACF;;YAEA;QACF;yBAAG;QAAC;KAAW;IAEf,iFAAiF;IACjF,IAAA,0KAAS;0BAAC;YACR,MAAM;oDAAoB;oBACxB,IAAI,MAAM,MAAM,GAAG,KAAK,CAAC,eAAe;wBACtC,MAAM,aAAa,KAAK,CAAC,EAAE,CAAC,EAAE;oBAChC,OAAO,IAAI,MAAM,MAAM,KAAK,KAAK,cAAc,CAAC,SAAS;wBACvD,yCAAyC;wBACzC,IAAI;4BACF,MAAM,WAAW;wBACnB,EAAE,OAAO,OAAO;4BACd,QAAQ,KAAK,CAAC,wBAAwB;wBACxC;oBACF;gBACF;;YAEA;QACF;yBAAG;QAAC;QAAO;QAAe;KAAW;IAErC,sEAAsE;IACtE,MAAM,oBAAoB,SAAS,GAAG,CAAC,CAAA,MAAO,CAAC;YAC7C,MAAM,IAAI,OAAO;YACjB,QAAQ,IAAI,IAAI,KAAK,SAAS,SAAkB;QAClD,CAAC;IAED,6DAA6D;IAC7D;;;;;;;;;;;;;;GAcC,GACD,MAAM,oBAAoB,OAAO;QAC/B,IAAI,CAAC,eAAe;YAClB,QAAQ,KAAK,CAAC;YACd;QACF;QAEA,IAAI;YACF,oDAAoD;YACpD,MAAM,YAAY,eAAe;QACnC,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,4BAA4B;QAC5C;IACF;IAEA,wDAAwD;IACxD,gEAAgE;IAChE,IAAI,CAAC,YAAY;QACf,OAAO;IACT;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BAEX,6LAAC,oIAAO;gBAAC,QAAQ;gBAAa,SAAS,IAAM,eAAe;;;;;;0BAM5D,6LAAC,mIAAM;gBAAC,eAAe,IAAM,eAAe;;;;;;0BAE5C,6LAAC;gBAAK,WAAU;0BASZ,cAAA,6LAAC,wIAAU;oBAAC,UAAU;oBAAmB,UAAU;;;;;;;;;;;0BAIvD,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;8BAgBb,cAAA,6LAAC,sIAAS;wBAAC,eAAe;wBAAmB,UAAU;;;;;;;;;;;;;;;;;;;;;;AAKnE;GA/IwB;;QACP,kJAAS;QACD,qIAAO;QAU1B,qIAAO;;;KAZW","debugId":null}}]
}